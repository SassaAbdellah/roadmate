{% extends "templates/base.html" %}

{% block title%}View Profile{% endblock %} <!-- just to test the script.aculo.us edit method -->

{% block main %}
<script src="/scripts/scriptaculous/1.8.1/prototype.js" type="text/javascript"></script>
<script src="/scripts/scriptaculous/1.8.1/scriptaculous.js" type="text/javascript"></script>
<script src="/scripts/roadmate/edit.js" type="text/javascript"></script>


   <h2>view profile</h2>

	<ul class="details-list">
	    <li><strong>Email </strong>{{ target_user.user.email }}</li>
	    <br/>
		<li>
		<strong>First Name </strong><editvalue id='first_name'> {{ target_user.first_name }}</editvalue>  <a id="editfirst_name" href="#">edit</a>
		<script>editControl('first_name', '/edit_profile?user=' + {{target_user.key.id}}, 'editfirst_name')</script>
		</li>
		<li><strong>Last Name </strong><editvalue id='last_name'> {{ target_user.last_name }}</editvalue>  <a id="editlast_name" href="#">edit</a>
        <script>editControl('last_name', '/edit_profile?user=' + {{target_user.key.id}}, 'editlast_name')</script>
		</li>
		<br/>
		<li><strong>Hometown </strong><editvalue id='town'>{{ target_user.town }}</editvalue>  <a id="edittown" href="#">edit</a>
        <script>editControl('town', '/edit_profile?user=' + {{target_user.key.id}}, 'edittown')</script>
		</li>
		<li><strong>Phone </strong><editvalue id='phone'>{{ target_user.phone }}</editvalue>  <a id="editphone" href="#">edit</a>
        <script>editControl('phone', '/edit_profile?user=' + {{target_user.key.id}}, 'editphone')</script>
		</li>


	</ul>

	{% if my_rides %}
	<hr />
		<h2>offered rides</h2>
		<table>
			<tr>
				<th>Ride</th>
				<th>Date</th>
				<th>Status</th>
			</tr>
			{% for ride in my_rides %}
				<tr class="row-a">
					<td>
						<a href="/ride?id={{ ride.key.id }}">{{ ride.get_name }}</a>
					</td>
					<td>
						{{ ride.date }}
					</td>
					<td>
						{{ ride.status }}
					</td>
				</tr>
			{% endfor %}
		</table>

	{% endif %}

{% endblock %}
