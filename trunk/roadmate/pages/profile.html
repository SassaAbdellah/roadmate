{% extends "templates/base.html" %}

{% block title%}View Profile{% endblock %}

{% block javascript %}
<script src="/scripts/scriptaculous/1.8.1/prototype.js" type="text/javascript"></script>
<script src="/scripts/scriptaculous/1.8.1/scriptaculous.js" type="text/javascript"></script>
<script src="/scripts/roadmate/edit.js" type="text/javascript"></script>

<script type="text/javascript" language="javascript">
	// <![CDATA[
	
	document.observe('dom:loaded', function() {
		{% ifequal current_user target_user %}
			editTextControl('first_name', '/ajax/edit_profile?user=' + {{ target_user.key.id }})
			editTextControl('last_name', '/ajax/edit_profile?user=' + {{ target_user.key.id }})
			editTextControl('town', '/ajax/edit_profile?user=' + {{ target_user.key.id }})
			editTextControl('phone', '/ajax/edit_profile?user=' + {{ target_user.key.id }})
		{% endifequal %}
	});

	// ]]>
</script>
{% endblock %}

{% block main %}

   <h2>view profile</h2>

	<form>
	<div class="inputgroup">
		<div>
			<label>Email</label>
			{{ target_user.user.email }}
		</div>
	    <br/>
	
		<div>
			<label for="first_name">First Name</label>
			<p id="first_name" class="inplaceeditor-text">{{ target_user.first_name }}</p>
		</div>
		<div>
			<label for="last_name">Last Name</label>
			<p id="last_name" class="inplaceeditor-text">{{ target_user.last_name }}</p>
		</div>
		<br/>
		
		<div>
			<label for="town">Hometown</label>
			<p id="town" class="inplaceeditor-text">{{ target_user.town }}</p>
		</div>
		<div>
			<label for="phone">Phone</label>
			<p id="phone" class="inplaceeditor-text">{{ target_user.phone }}</p>
		</div>
	</div>
	</form>

	{% if my_rides %}
	<hr />
		<h2>offered rides</h2>
		<table>
			<tr>
				<th>Ride</th>
				<th>Date</th>
				<th>Status</th>
			</tr>
			{% for ride in my_rides %}
				<tr class="row-a">
					<td>
						<a href="/ride?id={{ ride.key.id }}">{{ ride.get_name }}</a>
					</td>
					<td>
						{{ ride.date }}
					</td>
					<td>
						{{ ride.status }}
					</td>
				</tr>
			{% endfor %}
		</table>

	{% endif %}

{% endblock %}
